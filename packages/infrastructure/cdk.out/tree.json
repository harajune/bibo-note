{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.201.0"},"children":{"GitHubActionsRoleStack":{"id":"GitHubActionsRoleStack","path":"GitHubActionsRoleStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.201.0"},"children":{"GitHubOidcProvider":{"id":"GitHubOidcProvider","path":"GitHubActionsRoleStack/GitHubOidcProvider","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.OpenIdConnectProvider","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"GitHubActionsRoleStack/GitHubOidcProvider/Resource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.201.0","metadata":[]},"children":{"Default":{"id":"Default","path":"GitHubActionsRoleStack/GitHubOidcProvider/Resource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.201.0"}}}}}},"Custom::AWSCDKOpenIdConnectProviderCustomResourceProvider":{"id":"Custom::AWSCDKOpenIdConnectProviderCustomResourceProvider","path":"GitHubActionsRoleStack/Custom::AWSCDKOpenIdConnectProviderCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.201.0"},"children":{"Staging":{"id":"Staging","path":"GitHubActionsRoleStack/Custom::AWSCDKOpenIdConnectProviderCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"Role":{"id":"Role","path":"GitHubActionsRoleStack/Custom::AWSCDKOpenIdConnectProviderCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.201.0"}},"Handler":{"id":"Handler","path":"GitHubActionsRoleStack/Custom::AWSCDKOpenIdConnectProviderCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.201.0"}}}},"GitHubActionsRole":{"id":"GitHubActionsRole","path":"GitHubActionsRoleStack/GitHubActionsRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[]},"children":{"ImportGitHubActionsRole":{"id":"ImportGitHubActionsRole","path":"GitHubActionsRoleStack/GitHubActionsRole/ImportGitHubActionsRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":[]}},"Resource":{"id":"Resource","path":"GitHubActionsRoleStack/GitHubActionsRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRoleWithWebIdentity","Condition":{"StringLike":{"token.actions.githubusercontent.com:sub":"repo:harajune/bibo-note:*"},"StringEquals":{"token.actions.githubusercontent.com:aud":"sts.amazonaws.com"}},"Effect":"Allow","Principal":{"Federated":{"Ref":"GitHubOidcProvider7EBF861F"}}}],"Version":"2012-10-17"},"description":"Role for GitHub Actions to deploy CDK stacks","managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AdministratorAccess"]]}],"roleName":"GitHubActionsDeploymentRole"}}}}},"GitHubActionsRoleArn":{"id":"GitHubActionsRoleArn","path":"GitHubActionsRoleStack/GitHubActionsRoleArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"GitHubActionsRoleStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"GitHubActionsRoleStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.201.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"GitHubActionsRoleStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.201.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"GitHubActionsRoleStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.201.0"}}}},"CertificateStack-production":{"id":"CertificateStack-production","path":"CertificateStack-production","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.201.0"},"children":{"HostedZone":{"id":"HostedZone","path":"CertificateStack-production/HostedZone","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":[]}},"SiteCertificate":{"id":"SiteCertificate","path":"CertificateStack-production/SiteCertificate","constructInfo":{"fqn":"aws-cdk-lib.aws_certificatemanager.Certificate","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CertificateStack-production/SiteCertificate/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_certificatemanager.CfnCertificate","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CertificateManager::Certificate","aws:cdk:cloudformation:props":{"domainName":"bibo-note.jp","domainValidationOptions":[{"domainName":"bibo-note.jp","hostedZoneId":"Z08641051STVZTDK95QAW"}],"subjectAlternativeNames":["*.bibo-note.jp"],"tags":[{"key":"Name","value":"CertificateStack-production/SiteCertificate"}],"validationMethod":"DNS"}}}}},"CertificateArnParameter":{"id":"CertificateArnParameter","path":"CertificateStack-production/CertificateArnParameter","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CertificateStack-production/CertificateArnParameter/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"dataType":"text","description":"Certificate ARN for CloudFront - production","name":"/bibo-note/certificate_arn","type":"String","value":{"Ref":"SiteCertificate38C247F6"}}}}}},"CDKMetadata":{"id":"CDKMetadata","path":"CertificateStack-production/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"CertificateStack-production/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.201.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"CertificateStack-production/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.201.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"CertificateStack-production/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.201.0"}}}},"LambdaEdgeStack-production":{"id":"LambdaEdgeStack-production","path":"LambdaEdgeStack-production","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.201.0"},"children":{"EdgeFunctionRole":{"id":"EdgeFunctionRole","path":"LambdaEdgeStack-production/EdgeFunctionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[]},"children":{"ImportEdgeFunctionRole":{"id":"ImportEdgeFunctionRole","path":"LambdaEdgeStack-production/EdgeFunctionRole/ImportEdgeFunctionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":[]}},"Resource":{"id":"Resource","path":"LambdaEdgeStack-production/EdgeFunctionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":["edgelambda.amazonaws.com","lambda.amazonaws.com"]}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}}}},"ComputeSha256EdgeFunction":{"id":"ComputeSha256EdgeFunction","path":"LambdaEdgeStack-production/ComputeSha256EdgeFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.201.0","metadata":[]},"children":{"Code":{"id":"Code","path":"LambdaEdgeStack-production/ComputeSha256EdgeFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"LambdaEdgeStack-production/ComputeSha256EdgeFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"LambdaEdgeStack-production/ComputeSha256EdgeFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"LambdaEdgeStack-production/ComputeSha256EdgeFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-557690619781-us-east-1","s3Key":"150404c50609ff256bd9f65f6bb99c83568cb44d0915cd016e0134d2516564b2.zip"},"functionName":"compute-sha256-edge-function-production","handler":"index.handler","memorySize":1769,"role":{"Fn::GetAtt":["EdgeFunctionRole6FC7C5CE","Arn"]},"runtime":"nodejs22.x","timeout":5}}},"CurrentVersion":{"id":"CurrentVersion","path":"LambdaEdgeStack-production/ComputeSha256EdgeFunction/CurrentVersion","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Version","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"LambdaEdgeStack-production/ComputeSha256EdgeFunction/CurrentVersion/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnVersion","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Version","aws:cdk:cloudformation:props":{"functionName":{"Ref":"ComputeSha256EdgeFunctionB10C0419"}}}}}}}},"EdgeFunctionArnParameter":{"id":"EdgeFunctionArnParameter","path":"LambdaEdgeStack-production/EdgeFunctionArnParameter","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"LambdaEdgeStack-production/EdgeFunctionArnParameter/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"description":"The Lambda@Edge ARN for CloudFront - production","name":"/bibo-note/production/edge_function_arn","tier":"Standard","type":"String","value":{"Ref":"ComputeSha256EdgeFunctionCurrentVersionD4C2724D555dbaefbaac24a6cb28ff691b2da8b0"}}}}}},"CDKMetadata":{"id":"CDKMetadata","path":"LambdaEdgeStack-production/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"LambdaEdgeStack-production/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.201.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"LambdaEdgeStack-production/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.201.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"LambdaEdgeStack-production/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.201.0"}}}},"AuthorizationEdgeFunctionStack-production":{"id":"AuthorizationEdgeFunctionStack-production","path":"AuthorizationEdgeFunctionStack-production","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.201.0"},"children":{"AuthorizationEdgeFunctionRole":{"id":"AuthorizationEdgeFunctionRole","path":"AuthorizationEdgeFunctionStack-production/AuthorizationEdgeFunctionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[]},"children":{"ImportAuthorizationEdgeFunctionRole":{"id":"ImportAuthorizationEdgeFunctionRole","path":"AuthorizationEdgeFunctionStack-production/AuthorizationEdgeFunctionRole/ImportAuthorizationEdgeFunctionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":[]}},"Resource":{"id":"Resource","path":"AuthorizationEdgeFunctionStack-production/AuthorizationEdgeFunctionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":["edgelambda.amazonaws.com","lambda.amazonaws.com"]}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}}}},"AuthorizationEdgeFunction":{"id":"AuthorizationEdgeFunction","path":"AuthorizationEdgeFunctionStack-production/AuthorizationEdgeFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.201.0","metadata":[]},"children":{"Code":{"id":"Code","path":"AuthorizationEdgeFunctionStack-production/AuthorizationEdgeFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"AuthorizationEdgeFunctionStack-production/AuthorizationEdgeFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"AuthorizationEdgeFunctionStack-production/AuthorizationEdgeFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"AuthorizationEdgeFunctionStack-production/AuthorizationEdgeFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-557690619781-us-east-1","s3Key":"fb15eab443cc207a8ea319d81ff24b23c55efd7cba0319c7d001863ce308f266.zip"},"functionName":"authorization-edge-function-production","handler":"index.handler","memorySize":128,"role":{"Fn::GetAtt":["AuthorizationEdgeFunctionRole539C960A","Arn"]},"runtime":"nodejs22.x","timeout":5}}},"CurrentVersion":{"id":"CurrentVersion","path":"AuthorizationEdgeFunctionStack-production/AuthorizationEdgeFunction/CurrentVersion","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Version","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AuthorizationEdgeFunctionStack-production/AuthorizationEdgeFunction/CurrentVersion/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnVersion","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Version","aws:cdk:cloudformation:props":{"functionName":{"Ref":"AuthorizationEdgeFunction2F5C2127"}}}}}}}},"AuthorizationEdgeFunctionArnParameter":{"id":"AuthorizationEdgeFunctionArnParameter","path":"AuthorizationEdgeFunctionStack-production/AuthorizationEdgeFunctionArnParameter","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AuthorizationEdgeFunctionStack-production/AuthorizationEdgeFunctionArnParameter/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"description":"The Lambda@Edge ARN for CloudFront - production","name":"/bibo-note/production/authorization_edge_function_arn","tier":"Standard","type":"String","value":{"Ref":"AuthorizationEdgeFunctionCurrentVersion664B6EA35defe299b31e4fb9a5de502432a2e34c"}}}}}},"CDKMetadata":{"id":"CDKMetadata","path":"AuthorizationEdgeFunctionStack-production/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"AuthorizationEdgeFunctionStack-production/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.201.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"AuthorizationEdgeFunctionStack-production/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.201.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"AuthorizationEdgeFunctionStack-production/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.201.0"}}}},"CloudFrontDistributionStack-production":{"id":"CloudFrontDistributionStack-production","path":"CloudFrontDistributionStack-production","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.201.0"},"children":{"CertificateArnParameter":{"id":"CertificateArnParameter","path":"CloudFrontDistributionStack-production/CertificateArnParameter","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"CertificateArnParameterCustomResource":{"id":"CertificateArnParameterCustomResource","path":"CloudFrontDistributionStack-production/CertificateArnParameter/CertificateArnParameterCustomResource","constructInfo":{"fqn":"aws-cdk-lib.custom_resources.AwsCustomResource","version":"2.201.0"},"children":{"Provider":{"id":"Provider","path":"CloudFrontDistributionStack-production/CertificateArnParameter/CertificateArnParameterCustomResource/Provider","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.SingletonFunction","version":"2.201.0","metadata":[]}},"Resource":{"id":"Resource","path":"CloudFrontDistributionStack-production/CertificateArnParameter/CertificateArnParameterCustomResource/Resource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.201.0","metadata":[]},"children":{"Default":{"id":"Default","path":"CloudFrontDistributionStack-production/CertificateArnParameter/CertificateArnParameterCustomResource/Resource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.201.0"}}}},"CustomResourcePolicy":{"id":"CustomResourcePolicy","path":"CloudFrontDistributionStack-production/CertificateArnParameter/CertificateArnParameterCustomResource/CustomResourcePolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CloudFrontDistributionStack-production/CertificateArnParameter/CertificateArnParameterCustomResource/CustomResourcePolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"ssm:GetParameter*","Effect":"Allow","Resource":"arn:aws:ssm:us-east-1:557690619781:parameter/bibo-note/certificate_arn"}],"Version":"2012-10-17"},"policyName":"CertificateArnParameterCertificateArnParameterCustomResourceCustomResourcePolicy28AB3103","roles":[{"Ref":"AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2"}]}}}}}}}}},"AWS679f53fac002430cb0da5b7982bd2287":{"id":"AWS679f53fac002430cb0da5b7982bd2287","path":"CloudFrontDistributionStack-production/AWS679f53fac002430cb0da5b7982bd2287","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"CloudFrontDistributionStack-production/AWS679f53fac002430cb0da5b7982bd2287/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"CloudFrontDistributionStack-production/AWS679f53fac002430cb0da5b7982bd2287/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":[]}},"Resource":{"id":"Resource","path":"CloudFrontDistributionStack-production/AWS679f53fac002430cb0da5b7982bd2287/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}}}},"Code":{"id":"Code","path":"CloudFrontDistributionStack-production/AWS679f53fac002430cb0da5b7982bd2287/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"CloudFrontDistributionStack-production/AWS679f53fac002430cb0da5b7982bd2287/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"CloudFrontDistributionStack-production/AWS679f53fac002430cb0da5b7982bd2287/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"CloudFrontDistributionStack-production/AWS679f53fac002430cb0da5b7982bd2287/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-557690619781-ap-northeast-1","s3Key":"c099eb4e32cbf1c3da9c45a3b280efe2bed38d27d74aa72702b67d86d1b52354.zip"},"handler":"index.handler","role":{"Fn::GetAtt":["AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2","Arn"]},"runtime":"nodejs22.x","timeout":120}}}}},"EdgeFunctionArnParameter":{"id":"EdgeFunctionArnParameter","path":"CloudFrontDistributionStack-production/EdgeFunctionArnParameter","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"EdgeFunctionArnParameterCustomResource":{"id":"EdgeFunctionArnParameterCustomResource","path":"CloudFrontDistributionStack-production/EdgeFunctionArnParameter/EdgeFunctionArnParameterCustomResource","constructInfo":{"fqn":"aws-cdk-lib.custom_resources.AwsCustomResource","version":"2.201.0"},"children":{"Provider":{"id":"Provider","path":"CloudFrontDistributionStack-production/EdgeFunctionArnParameter/EdgeFunctionArnParameterCustomResource/Provider","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.SingletonFunction","version":"2.201.0","metadata":[]}},"Resource":{"id":"Resource","path":"CloudFrontDistributionStack-production/EdgeFunctionArnParameter/EdgeFunctionArnParameterCustomResource/Resource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.201.0","metadata":[]},"children":{"Default":{"id":"Default","path":"CloudFrontDistributionStack-production/EdgeFunctionArnParameter/EdgeFunctionArnParameterCustomResource/Resource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.201.0"}}}},"CustomResourcePolicy":{"id":"CustomResourcePolicy","path":"CloudFrontDistributionStack-production/EdgeFunctionArnParameter/EdgeFunctionArnParameterCustomResource/CustomResourcePolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CloudFrontDistributionStack-production/EdgeFunctionArnParameter/EdgeFunctionArnParameterCustomResource/CustomResourcePolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"ssm:GetParameter*","Effect":"Allow","Resource":"arn:aws:ssm:us-east-1:557690619781:parameter/bibo-note/production/edge_function_arn"}],"Version":"2012-10-17"},"policyName":"EdgeFunctionArnParameterEdgeFunctionArnParameterCustomResourceCustomResourcePolicy1330BADE","roles":[{"Ref":"AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2"}]}}}}}}}}},"AuthorizationEdgeFunctionArnParameter":{"id":"AuthorizationEdgeFunctionArnParameter","path":"CloudFrontDistributionStack-production/AuthorizationEdgeFunctionArnParameter","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"AuthorizationEdgeFunctionArnParameterCustomResource":{"id":"AuthorizationEdgeFunctionArnParameterCustomResource","path":"CloudFrontDistributionStack-production/AuthorizationEdgeFunctionArnParameter/AuthorizationEdgeFunctionArnParameterCustomResource","constructInfo":{"fqn":"aws-cdk-lib.custom_resources.AwsCustomResource","version":"2.201.0"},"children":{"Provider":{"id":"Provider","path":"CloudFrontDistributionStack-production/AuthorizationEdgeFunctionArnParameter/AuthorizationEdgeFunctionArnParameterCustomResource/Provider","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.SingletonFunction","version":"2.201.0","metadata":[]}},"Resource":{"id":"Resource","path":"CloudFrontDistributionStack-production/AuthorizationEdgeFunctionArnParameter/AuthorizationEdgeFunctionArnParameterCustomResource/Resource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.201.0","metadata":[]},"children":{"Default":{"id":"Default","path":"CloudFrontDistributionStack-production/AuthorizationEdgeFunctionArnParameter/AuthorizationEdgeFunctionArnParameterCustomResource/Resource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.201.0"}}}},"CustomResourcePolicy":{"id":"CustomResourcePolicy","path":"CloudFrontDistributionStack-production/AuthorizationEdgeFunctionArnParameter/AuthorizationEdgeFunctionArnParameterCustomResource/CustomResourcePolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CloudFrontDistributionStack-production/AuthorizationEdgeFunctionArnParameter/AuthorizationEdgeFunctionArnParameterCustomResource/CustomResourcePolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"ssm:GetParameter*","Effect":"Allow","Resource":"arn:aws:ssm:us-east-1:557690619781:parameter/bibo-note/production/authorization_edge_function_arn"}],"Version":"2012-10-17"},"policyName":"AuthorizationEdgeFunctionArnParameterAuthorizationEdgeFunctionArnParameterCustomResourceCustomResourcePolicyC480E23B","roles":[{"Ref":"AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2"}]}}}}}}}}},"EdgeFunctionRole":{"id":"EdgeFunctionRole","path":"CloudFrontDistributionStack-production/EdgeFunctionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[]},"children":{"ImportEdgeFunctionRole":{"id":"ImportEdgeFunctionRole","path":"CloudFrontDistributionStack-production/EdgeFunctionRole/ImportEdgeFunctionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":[]}},"Resource":{"id":"Resource","path":"CloudFrontDistributionStack-production/EdgeFunctionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":["edgelambda.amazonaws.com","lambda.amazonaws.com"]}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}}}},"ImportedCertificate":{"id":"ImportedCertificate","path":"CloudFrontDistributionStack-production/ImportedCertificate","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":[]}},"EdgeFunctionVersionFunction":{"id":"EdgeFunctionVersionFunction","path":"CloudFrontDistributionStack-production/EdgeFunctionVersionFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.FunctionBase","version":"2.201.0","metadata":[]}},"EdgeFunctionVersion":{"id":"EdgeFunctionVersion","path":"CloudFrontDistributionStack-production/EdgeFunctionVersion","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.QualifiedFunctionBase","version":"2.201.0","metadata":[]}},"AuthorizationEdgeFunctionVersionFunction":{"id":"AuthorizationEdgeFunctionVersionFunction","path":"CloudFrontDistributionStack-production/AuthorizationEdgeFunctionVersionFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.FunctionBase","version":"2.201.0","metadata":[]}},"AuthorizationEdgeFunctionVersion":{"id":"AuthorizationEdgeFunctionVersion","path":"CloudFrontDistributionStack-production/AuthorizationEdgeFunctionVersion","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.QualifiedFunctionBase","version":"2.201.0","metadata":[]}},"WorkerFunction":{"id":"WorkerFunction","path":"CloudFrontDistributionStack-production/WorkerFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"CloudFrontDistributionStack-production/WorkerFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"CloudFrontDistributionStack-production/WorkerFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":[]}},"Resource":{"id":"Resource","path":"CloudFrontDistributionStack-production/WorkerFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}}}},"Code":{"id":"Code","path":"CloudFrontDistributionStack-production/WorkerFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"CloudFrontDistributionStack-production/WorkerFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"CloudFrontDistributionStack-production/WorkerFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"CloudFrontDistributionStack-production/WorkerFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-557690619781-ap-northeast-1","s3Key":"da748ab31f2c8f11a7914ccabf80bb953d702e4368c8f0177856d8f6af38a1d4.zip"},"environment":{"variables":{"WIKI_BUCKET_NAME":{"Ref":"WikiDataBucketBD2BC5D6"},"MULTITENANT":"1","MODE":"production"}},"functionName":"application-worker-production","handler":"worker.handler","role":{"Fn::GetAtt":["WorkerFunctionServiceRole38D8F738","Arn"]},"runtime":"nodejs22.x"}}},"FunctionUrl":{"id":"FunctionUrl","path":"CloudFrontDistributionStack-production/WorkerFunction/FunctionUrl","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.FunctionUrl","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CloudFrontDistributionStack-production/WorkerFunction/FunctionUrl/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnUrl","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Url","aws:cdk:cloudformation:props":{"authType":"AWS_IAM","targetFunctionArn":{"Fn::GetAtt":["WorkerFunctionACE6A4B0","Arn"]}}}}}},"AllowCloudFrontAccess":{"id":"AllowCloudFrontAccess","path":"CloudFrontDistributionStack-production/WorkerFunction/AllowCloudFrontAccess","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunctionUrl","functionName":{"Fn::GetAtt":["WorkerFunctionACE6A4B0","Arn"]},"functionUrlAuthType":"AWS_IAM","principal":"cloudfront.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:cloudfront::557690619781:distribution/",{"Ref":"Distribution830FAC52"}]]}}}}}},"StaticBucket":{"id":"StaticBucket","path":"CloudFrontDistributionStack-production/StaticBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CloudFrontDistributionStack-production/StaticBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"tags":[{"key":"aws-cdk:auto-delete-objects","value":"true"},{"key":"aws-cdk:cr-owned:static/:19172d17","value":"true"}]}}},"Policy":{"id":"Policy","path":"CloudFrontDistributionStack-production/StaticBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CloudFrontDistributionStack-production/StaticBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"StaticBucket92253581"},"policyDocument":{"Statement":[{"Action":["s3:DeleteObject*","s3:GetBucket*","s3:List*","s3:PutBucketPolicy"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["StaticBucket92253581","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["StaticBucket92253581","Arn"]},"/*"]]}]},{"Action":"s3:GetObject","Condition":{"StringEquals":{"AWS:SourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":cloudfront::",{"Ref":"AWS::AccountId"},":distribution/",{"Ref":"Distribution830FAC52"}]]}}},"Effect":"Allow","Principal":{"Service":"cloudfront.amazonaws.com"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["StaticBucket92253581","Arn"]},"/*"]]}}],"Version":"2012-10-17"}}}}}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"CloudFrontDistributionStack-production/StaticBucket/AutoDeleteObjectsCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.201.0","metadata":[]},"children":{"Default":{"id":"Default","path":"CloudFrontDistributionStack-production/StaticBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.201.0"}}}}}},"Custom::S3AutoDeleteObjectsCustomResourceProvider":{"id":"Custom::S3AutoDeleteObjectsCustomResourceProvider","path":"CloudFrontDistributionStack-production/Custom::S3AutoDeleteObjectsCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.201.0"},"children":{"Staging":{"id":"Staging","path":"CloudFrontDistributionStack-production/Custom::S3AutoDeleteObjectsCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"Role":{"id":"Role","path":"CloudFrontDistributionStack-production/Custom::S3AutoDeleteObjectsCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.201.0"}},"Handler":{"id":"Handler","path":"CloudFrontDistributionStack-production/Custom::S3AutoDeleteObjectsCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.201.0"}}}},"StaticDeployment":{"id":"StaticDeployment","path":"CloudFrontDistributionStack-production/StaticDeployment","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_deployment.BucketDeployment","version":"2.201.0"},"children":{"AwsCliLayer":{"id":"AwsCliLayer","path":"CloudFrontDistributionStack-production/StaticDeployment/AwsCliLayer","constructInfo":{"fqn":"aws-cdk-lib.lambda_layer_awscli.AwsCliLayer","version":"2.201.0","metadata":[]},"children":{"Code":{"id":"Code","path":"CloudFrontDistributionStack-production/StaticDeployment/AwsCliLayer/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"CloudFrontDistributionStack-production/StaticDeployment/AwsCliLayer/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"CloudFrontDistributionStack-production/StaticDeployment/AwsCliLayer/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"CloudFrontDistributionStack-production/StaticDeployment/AwsCliLayer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnLayerVersion","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::LayerVersion","aws:cdk:cloudformation:props":{"content":{"s3Bucket":"cdk-hnb659fds-assets-557690619781-ap-northeast-1","s3Key":"b8ab94266984268614c3fb2824a1c3a55395746c48b28c003b08bc1d08688f3e.zip"},"description":"/opt/awscli/aws"}}}}},"CustomResourceHandler":{"id":"CustomResourceHandler","path":"CloudFrontDistributionStack-production/StaticDeployment/CustomResourceHandler","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.SingletonFunction","version":"2.201.0","metadata":[]}},"Asset1":{"id":"Asset1","path":"CloudFrontDistributionStack-production/StaticDeployment/Asset1","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"CloudFrontDistributionStack-production/StaticDeployment/Asset1/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"CloudFrontDistributionStack-production/StaticDeployment/Asset1/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"CustomResource":{"id":"CustomResource","path":"CloudFrontDistributionStack-production/StaticDeployment/CustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.201.0","metadata":[]},"children":{"Default":{"id":"Default","path":"CloudFrontDistributionStack-production/StaticDeployment/CustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.201.0"}}}}}},"Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C":{"id":"Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C","path":"CloudFrontDistributionStack-production/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"CloudFrontDistributionStack-production/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"CloudFrontDistributionStack-production/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":[]}},"Resource":{"id":"Resource","path":"CloudFrontDistributionStack-production/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"CloudFrontDistributionStack-production/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CloudFrontDistributionStack-production/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetBucket*","s3:GetObject*","s3:List*"],"Effect":"Allow","Resource":["arn:aws:s3:::cdk-hnb659fds-assets-557690619781-ap-northeast-1","arn:aws:s3:::cdk-hnb659fds-assets-557690619781-ap-northeast-1/*"]},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["StaticBucket92253581","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["StaticBucket92253581","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRoleDefaultPolicy88902FDF","roles":[{"Ref":"CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRole89A01265"}]}}}}}}},"Code":{"id":"Code","path":"CloudFrontDistributionStack-production/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"CloudFrontDistributionStack-production/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"CloudFrontDistributionStack-production/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"CloudFrontDistributionStack-production/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-557690619781-ap-northeast-1","s3Key":"9a1fcb4a7ecba81ad70e9d3fb241f6794497da945dae5f25924e4dd002b65f2d.zip"},"environment":{"variables":{"AWS_CA_BUNDLE":"/etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem"}},"handler":"index.handler","layers":[{"Ref":"StaticDeploymentAwsCliLayer1897F131"}],"role":{"Fn::GetAtt":["CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRole89A01265","Arn"]},"runtime":"python3.11","timeout":900}}}}},"LambdaOAC":{"id":"LambdaOAC","path":"CloudFrontDistributionStack-production/LambdaOAC","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnOriginAccessControl","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::OriginAccessControl","aws:cdk:cloudformation:props":{"originAccessControlConfig":{"name":"LambdaOAC","description":"OAC for Lambda function URL","originAccessControlOriginType":"lambda","signingBehavior":"always","signingProtocol":"sigv4"}}}},"ArticleCachePolicy":{"id":"ArticleCachePolicy","path":"CloudFrontDistributionStack-production/ArticleCachePolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CachePolicy","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CloudFrontDistributionStack-production/ArticleCachePolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnCachePolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::CachePolicy","aws:cdk:cloudformation:props":{"cachePolicyConfig":{"name":"ArticleCachePolicy","comment":"Cache policy for article pages","minTtl":1,"maxTtl":1,"defaultTtl":1,"parametersInCacheKeyAndForwardedToOrigin":{"cookiesConfig":{"cookieBehavior":"none"},"headersConfig":{"headerBehavior":"whitelist","headers":["x-forwarded-host","authorization"]},"enableAcceptEncodingGzip":true,"enableAcceptEncodingBrotli":true,"queryStringsConfig":{"queryStringBehavior":"none"}}}}}}}},"StaticCachePolicy":{"id":"StaticCachePolicy","path":"CloudFrontDistributionStack-production/StaticCachePolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CachePolicy","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CloudFrontDistributionStack-production/StaticCachePolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnCachePolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::CachePolicy","aws:cdk:cloudformation:props":{"cachePolicyConfig":{"name":"StaticCachePolicy","comment":"Cache policy for static files","minTtl":1,"maxTtl":1,"defaultTtl":1,"parametersInCacheKeyAndForwardedToOrigin":{"cookiesConfig":{"cookieBehavior":"none"},"headersConfig":{"headerBehavior":"none"},"enableAcceptEncodingGzip":true,"enableAcceptEncodingBrotli":true,"queryStringsConfig":{"queryStringBehavior":"none"}}}}}}}},"Distribution":{"id":"Distribution","path":"CloudFrontDistributionStack-production/Distribution","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.Distribution","version":"2.201.0","metadata":[]},"children":{"Origin1":{"id":"Origin1","path":"CloudFrontDistributionStack-production/Distribution/Origin1","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Origin2":{"id":"Origin2","path":"CloudFrontDistributionStack-production/Distribution/Origin2","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"S3OriginAccessControl":{"id":"S3OriginAccessControl","path":"CloudFrontDistributionStack-production/Distribution/Origin2/S3OriginAccessControl","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.S3OriginAccessControl","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CloudFrontDistributionStack-production/Distribution/Origin2/S3OriginAccessControl/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnOriginAccessControl","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::OriginAccessControl","aws:cdk:cloudformation:props":{"originAccessControlConfig":{"name":"CloudFrontDistributionStackpOrigin2S3OriginAccessControl05780A54","signingBehavior":"always","signingProtocol":"sigv4","originAccessControlOriginType":"s3"}}}}}}}},"Resource":{"id":"Resource","path":"CloudFrontDistributionStack-production/Distribution/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnDistribution","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::Distribution","aws:cdk:cloudformation:props":{"distributionConfig":{"enabled":true,"origins":[{"domainName":{"Fn::Select":[2,{"Fn::Split":["/",{"Fn::GetAtt":["WorkerFunctionFunctionUrl5A5A4F7F","FunctionUrl"]}]}]},"id":"CloudFrontDistributionStackproductionDistributionOrigin165B899B2","customOriginConfig":{"originSslProtocols":["TLSv1.2"],"originProtocolPolicy":"https-only"},"originAccessControlId":{"Ref":"LambdaOAC"}},{"domainName":{"Fn::GetAtt":["StaticBucket92253581","RegionalDomainName"]},"id":"CloudFrontDistributionStackproductionDistributionOrigin264BFB3B2","s3OriginConfig":{"originAccessIdentity":""},"originAccessControlId":{"Fn::GetAtt":["DistributionOrigin2S3OriginAccessControlDC470594","Id"]}}],"defaultCacheBehavior":{"pathPattern":"*","targetOriginId":"CloudFrontDistributionStackproductionDistributionOrigin165B899B2","allowedMethods":["GET","HEAD","OPTIONS","PUT","PATCH","POST","DELETE"],"cachePolicyId":"4135ea2d-6df8-44a3-9df3-4b5a84be39ad","compress":true,"originRequestPolicyId":"b689b0a8-53d0-40ab-baf2-68738e2966ac","responseHeadersPolicyId":"5cc3b908-e619-4b99-88e5-2cf7f45965bd","viewerProtocolPolicy":"redirect-to-https","lambdaFunctionAssociations":[{"lambdaFunctionArn":{"Fn::GetAtt":["EdgeFunctionArnParameterEdgeFunctionArnParameterCustomResourceA51A62E2","Parameter.Value"]},"eventType":"origin-request","includeBody":true},{"lambdaFunctionArn":{"Fn::GetAtt":["AuthorizationEdgeFunctionArnParameterAuthorizationEdgeFunctionArnParameterCustomResourceFD7FE045","Parameter.Value"]},"eventType":"viewer-request","includeBody":true}]},"aliases":["bibo-note.jp","*.bibo-note.jp"],"cacheBehaviors":[{"pathPattern":"static/*","targetOriginId":"CloudFrontDistributionStackproductionDistributionOrigin264BFB3B2","cachePolicyId":{"Ref":"StaticCachePolicy59539962"},"compress":true,"viewerProtocolPolicy":"redirect-to-https"},{"pathPattern":"v/*","targetOriginId":"CloudFrontDistributionStackproductionDistributionOrigin165B899B2","allowedMethods":["GET","HEAD","OPTIONS","PUT","PATCH","POST","DELETE"],"cachePolicyId":{"Ref":"ArticleCachePolicy26554D02"},"compress":true,"originRequestPolicyId":"b689b0a8-53d0-40ab-baf2-68738e2966ac","responseHeadersPolicyId":"5cc3b908-e619-4b99-88e5-2cf7f45965bd","viewerProtocolPolicy":"redirect-to-https","lambdaFunctionAssociations":[{"lambdaFunctionArn":{"Fn::GetAtt":["AuthorizationEdgeFunctionArnParameterAuthorizationEdgeFunctionArnParameterCustomResourceFD7FE045","Parameter.Value"]},"eventType":"viewer-request","includeBody":true}]}],"httpVersion":"http2","ipv6Enabled":true,"viewerCertificate":{"acmCertificateArn":{"Fn::GetAtt":["CertificateArnParameterCertificateArnParameterCustomResourceBDC1B823","Parameter.Value"]},"minimumProtocolVersion":"TLSv1.2_2021","sslSupportMethod":"sni-only"}}}}}}},"DistributionDomainName":{"id":"DistributionDomainName","path":"CloudFrontDistributionStack-production/DistributionDomainName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"HostedZone":{"id":"HostedZone","path":"CloudFrontDistributionStack-production/HostedZone","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":[]}},"AliasRecordApex":{"id":"AliasRecordApex","path":"CloudFrontDistributionStack-production/AliasRecordApex","constructInfo":{"fqn":"aws-cdk-lib.aws_route53.ARecord","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CloudFrontDistributionStack-production/AliasRecordApex/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_route53.CfnRecordSet","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Route53::RecordSet","aws:cdk:cloudformation:props":{"aliasTarget":{"hostedZoneId":{"Fn::FindInMap":["AWSCloudFrontPartitionHostedZoneIdMap",{"Ref":"AWS::Partition"},"zoneId"]},"dnsName":{"Fn::GetAtt":["Distribution830FAC52","DomainName"]}},"hostedZoneId":"Z08641051STVZTDK95QAW","name":"bibo-note.jp.","type":"A"}}}}},"AWSCloudFrontPartitionHostedZoneIdMap":{"id":"AWSCloudFrontPartitionHostedZoneIdMap","path":"CloudFrontDistributionStack-production/AWSCloudFrontPartitionHostedZoneIdMap","constructInfo":{"fqn":"aws-cdk-lib.CfnMapping","version":"2.201.0"}},"AliasRecordWildcard":{"id":"AliasRecordWildcard","path":"CloudFrontDistributionStack-production/AliasRecordWildcard","constructInfo":{"fqn":"aws-cdk-lib.aws_route53.ARecord","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CloudFrontDistributionStack-production/AliasRecordWildcard/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_route53.CfnRecordSet","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Route53::RecordSet","aws:cdk:cloudformation:props":{"aliasTarget":{"hostedZoneId":{"Fn::FindInMap":["AWSCloudFrontPartitionHostedZoneIdMap",{"Ref":"AWS::Partition"},"zoneId"]},"dnsName":{"Fn::GetAtt":["Distribution830FAC52","DomainName"]}},"hostedZoneId":"Z08641051STVZTDK95QAW","name":"*.bibo-note.jp.","type":"A"}}}}},"WikiDataBucket":{"id":"WikiDataBucket","path":"CloudFrontDistributionStack-production/WikiDataBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CloudFrontDistributionStack-production/WikiDataBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"tags":[{"key":"aws-cdk:auto-delete-objects","value":"true"}]}}},"Policy":{"id":"Policy","path":"CloudFrontDistributionStack-production/WikiDataBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CloudFrontDistributionStack-production/WikiDataBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"WikiDataBucketBD2BC5D6"},"policyDocument":{"Statement":[{"Action":["s3:DeleteObject*","s3:GetBucket*","s3:List*","s3:PutBucketPolicy"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["WikiDataBucketBD2BC5D6","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["WikiDataBucketBD2BC5D6","Arn"]},"/*"]]}]},{"Action":["s3:DeleteObject","s3:GetObject","s3:PutObject"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["WorkerFunctionServiceRole38D8F738","Arn"]}},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["WikiDataBucketBD2BC5D6","Arn"]},"/*"]]}},{"Action":"s3:ListBucket","Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["WorkerFunctionServiceRole38D8F738","Arn"]}},"Resource":{"Fn::GetAtt":["WikiDataBucketBD2BC5D6","Arn"]}}],"Version":"2012-10-17"}}}}}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"CloudFrontDistributionStack-production/WikiDataBucket/AutoDeleteObjectsCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.201.0","metadata":[]},"children":{"Default":{"id":"Default","path":"CloudFrontDistributionStack-production/WikiDataBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.201.0"}}}}}},"WikiDataBucketName":{"id":"WikiDataBucketName","path":"CloudFrontDistributionStack-production/WikiDataBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"CloudFrontDistributionStack-production/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"CloudFrontDistributionStack-production/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.201.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"CloudFrontDistributionStack-production/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.201.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"CloudFrontDistributionStack-production/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.201.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}